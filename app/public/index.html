<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>üå§ Weather Woof üê∂</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!-- Compiled and minified CSS -->
    <!-- <link rel="stylesheet" href="assets/css/reset.css" type="text/css" /> -->
    <link rel="stylesheet" href="static/assets/css/main.css" type="text/css" />
</head>

<body>
    <h2>
        Weather Woof
    </h2>


    <div class="input-field col-sm-12">
        <div class="form-group">
            <input type="email" class="form-control zipCode" id="exampleFormControlInput1" placeholder="Enter your ZIP code">
        </div>
    </div>

    <!-- <div class="input-field breedList col s12">
        <select id="breedDropdown" multiple>
            <option value="" disabled selected>Breed</option>
        </select>
        <label>Breed</label> -->
    <!-- </div> -->

    <div class="input-field col-sm-12">
        <div class="bs-example breedDropdown">
            <input type="text" class="typeahead tt-query" autocomplete="off" spellcheck="false" placeholder="Breed">
        </div>
    </div>

    <div class="input-field col-sm-12">
        <div class="form-group">
            <label for="exampleFormControlSelect1"></label>
            <select class="form-control furColor" id="exampleFormControlSelect1">
                <option value="" disabled selected>Fur Color</option>
                <option>Tan</option>
                <option>Black</option>
                <option>White</option>
                <option>Grey</option>
                <option>Multi - Mostly Light Colored</option>
                <option>Multi - Mostly Dark Colored</option>
            </select>
        </div>
    </div>

    <div class="input-field col-sm-12">
        <div class="form-group">
            <label for="exampleFormControlSelect1"></label>
            <select class="form-control health" id="exampleFormControlSelect1">
                <option value="" disabled selected>Health</option>
                <option value="excellent">Excellent</option>
                <option value="good">Good</option>
                <option value="average"> </option>Average</option>
                <option value="poor">Poor</option>
                <option value="very poor">Very Poor</option>
            </select>
        </div>
    </div>

    <div class="input-field col-sm-12">
        <div class="form-group">
            <label for="exampleFormControlSelect1"></label>
            <select class="form-control age" id="exampleFormControlSelect1">
                <option value="" disabled selected>Age</option>
                <option value="0">Under 1</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
                <option value="13">13</option>
                <option value="14">14</option>
                <option value="15">15</option>
                <option value="16">16</option>
                <option value="17">17</option>
                <option value="18">18</option>
                <option value="19">19</option>
                <option value="20">20</option>
                <option value="Unknown">Unknown</option>
            </select>
        </div>
    </div>

    <!-- <div class="input-field col s12">
        <input placeholder="Enter your dog's weight" type="text" class="validate" id="weight">
         <label for="weight">Weight</label> -->
    <!-- </div> -->

    <div class="input-field col-sm-12">
        <div class="form-group">
            <label for="exampleFormControlSelect1"></label>
            <select class="form-control weight" id="exampleFormControlSelect1">
                <option value="" disabled selected>Is Your Dog Considered Overweight?</option>
                <option value="1">Yes</option>
                <option value="2">No</option>
                <option value="3">Not sure</option>
            </select>
        </div>
    </div>

    <button type="submit" data-toggle="modal" data-target="#dogModal" class="btn btn-primary" id="submit">Submit</button>

    <!-- 
    <button data-target="results" class="btn waves-effect waves-light modal-trigger" type="submit" name="action"
        id="submit">Submit
        <i class="material-icons right">send</i>
    </button> -->

    <!-- Modal Structure -->

    <div class="modal" id="dogModal" tabindex="-1" role="dialog" aria-labelledby="dogModal" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">Should I Walk My Dog?</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <p id="reason-explanation"></p>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div>

    <script>
        $(document).ready(function () {

            $('#myModal').on('shown.bs.modal', function () {
                $('#myInput').trigger('focus')
            })

            // $(function () {

            //     $.getJSON("static/js/breedlist.json", function (json) {
            //         // console.log("success")
            //         for (i = 0; i < json.length; i++) {
            //             dogBreeds = json[i];
            //             data = dogBreeds.breed
            //             $('input.autocomplete').autocomplete({
            //                 data: { "hey": "hey", "hi": "hi" }
            //             })

            //         }
            //     })
            // })


            // instantiate the bloodhound suggestion engine
            // Defining the local dataset
            var cars = ['Audi', 'BMW', 'Bugatti', 'Ferrari', 'Ford', 'Lamborghini', 'Mercedes Benz', 'Porsche', 'Rolls-Royce', 'Volkswagen'];

            // Constructing the suggestion engine
            var cars = new Bloodhound({
                datumTokenizer: Bloodhound.tokenizers.whitespace,
                queryTokenizer: Bloodhound.tokenizers.whitespace,
                local: cars
            });

            // Initializing the typeahead
            $('.typeahead').typeahead({
                hint: true,
                highlight: true, /* Enable substring highlighting */
                minLength: 1 /* Specify minimum characters required for showing suggestions */
            },
                {
                    name: 'cars',
                    source: cars
                });

            $("#submit").on("click", function (event) {
                // event.preventDefault();
                var weight = $('.weight').val();
                var healthSelection = $('.health')[0];
                var health = healthSelection.options[healthSelection.selectedIndex].text;
                var specificBreed = $('.breedDropdown').val();
                var weightSelectionQuestion = $(".weight")[0];
                var weightQuestion = weightSelectionQuestion.options[weightSelectionQuestion.selectedIndex].text;
                var colorSelection = $(".furColor")[0];
                var furColor = colorSelection.options[colorSelection.selectedIndex].text;
                var ageSelection = $(".age")[0];
                var age = ageSelection.options[ageSelection.selectedIndex].text;
                var key = '7f7b945e91014239992145942191307';
                var zip = $(".zipCode").val();

                var weatherFunction = getWeather(zip);
                console.log(weatherFunction.feelsLike)

                var formData = {
                    // weight: weight,
                    health: health,
                    specifiedBreed: specificBreed,
                    weightQuestion: weightQuestion,
                    furColor: furColor,
                    age: age,
                    zip: zip,
                    feelsLike: weatherFunction.feelsLike,
                    condition: weatherFunction.condition,
                };

                console.log(formData);

                var currentURL = window.location.origin;

                $.post(currentURL + "/api/dogstested", formData, function (data) {
                    $("#reason-explanation").text(data.shouldntwalk);
                })
            });

        });

    </script>

    <script type="text/javascript" src="static/js/dogapi.js"></script>
    <!-- <script type="text/javascript" src="static/js/breedlist.json"></script> -->
    <script type="text/javascript" src="static/js/weatherapi.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
    <script type="text/javascript" src="static/js/typeahead.bundle.js"></script>

</body>

</html>